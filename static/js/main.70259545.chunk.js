(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},31:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(4),c=a.n(o),l=a(5),i=a(6),s=a(8),u=a(7),h=a(9),m=(a(18),a(10)),p=a.n(m),d=a(3),f=Math.pow(10,8);function v(e,t,a){var n=a.m1*a.m2,r=2*a.C/n,o=(a.m1+a.m2)/2,c=Math.sqrt(Math.pow(a.m1-a.m2,2)/4+n*Math.pow(Math.cos(t*a.a),2)),l=o;return l+=e?c:-c,l*=r,Math.sqrt(l)}var y=1.672621777e-24,b=1e3,g=a(16),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={m1:1,m2:2,a:1,C:1},a.handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:parseFloat(t.value)||0,r=t.name;a.setState(Object(g.a)({},r,n))},a.handleSetupClick=function(){var e=Object.assign({},a.state);e.m1*=y,e.m2*=y,a.props.newParamsHandler(e)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){console.log("ParamsPanel componentDidUpdate()")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Params:"),r.a.createElement(d.e,null,r.a.createElement(d.f,{addonType:"prepend"},"m1"),r.a.createElement(d.d,{name:"m1",value:this.state.m1,placeholder:"Mass of 1st",type:"number",min:"0.0",max:"100.0",step:"0.1",onChange:this.handleInputChange}),r.a.createElement(d.f,{addonType:"append"}," * Mp")),r.a.createElement("br",null),r.a.createElement(d.e,null,r.a.createElement(d.f,{addonType:"prepend"},"m2"),r.a.createElement(d.d,{name:"m2",value:this.state.m2,placeholder:"Mass of 2d",type:"number",min:"0.0",max:"100.0",step:"0.1",onChange:this.handleInputChange}),r.a.createElement(d.f,{addonType:"append"}," * Mp")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.e,null,r.a.createElement(d.f,{addonType:"prepend"},"a"),r.a.createElement(d.d,{name:"a",value:this.state.a,placeholder:"",type:"number",min:"0.0",max:"100.0",step:"0.1",onChange:this.handleInputChange}),r.a.createElement(d.f,{addonType:"append"},"cm^(-8)")),r.a.createElement("br",null),r.a.createElement(d.e,null,r.a.createElement(d.f,{addonType:"prepend"},"C"),r.a.createElement(d.d,{name:"C",value:this.state.C,placeholder:"",type:"number",min:"0.0",max:"100.0",step:"0.1",onChange:this.handleInputChange}),r.a.createElement(d.f,{addonType:"append"},"10^3 erg / cm^2")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.e,null,r.a.createElement(d.a,{color:"success",onClick:this.handleSetupClick},"Setup")))}}]),t}(n.PureComponent),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isRunning:!0,currentTime:0,axis:"x"},a.plot={layout:{autosize:!0,title:"Animation",xaxis:{range:[-20,280]},yaxis:{range:[0,480]}},config:{}},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){this.startLoop()}},{key:"componentWillUnmount",value:function(){this.stopLoop()}},{key:"startLoop",value:function(){this._frameId||(this._frameId=window.requestAnimationFrame(this.loop.bind(this)))}},{key:"loop",value:function(){this._frameId=window.requestAnimationFrame(this.loop.bind(this)),this.state.isRunning&&this.setState({currentTime:this.state.currentTime+.1})}},{key:"stopLoop",value:function(){window.cancelAnimationFrame(this._frameId)}},{key:"getScatterData",value:function(){return[function(e,t,a){var n={x:[],y:[],marker:{size:28,color:[]},mode:"markers"},r=3*Math.sqrt(50),o=v(!1,a.currQ/f,a),c=v(!0,a.currQ/f,a),l=1,i=1;a.m1>a.m2?l=-a.m2/a.m1:a.m1<a.m2&&(i=-a.m1/a.m2);for(var s=1;s<14;s++){var u=0,h=0,m="black",p="blue";s%2===1?(m="black",p="blue",h=l*r*Math.cos(2*a.currQ*a.a*s-o*e/a.acousticWMax)+50*(s-1),u=Math.abs(a.currQ-Math.PI/(2*a.a)*f)<.2?50*(s-1):l*r*Math.cos(2*a.currQ*a.a*s-c*e/a.opticalWMax)+50*(s-1)):(m="yellow",p="red",u=i*r*Math.cos(2*a.currQ*a.a*s-c*e/a.opticalWMax)+50*(s-1),h=Math.abs(a.currQ-Math.PI/(2*a.a)*f)<.2?50*(s-1):i*r*Math.cos(2*a.currQ*a.a*s-o*e/a.acousticWMax)+50*(s-1)),n.marker.color.push(m),n.x.push(u),n.y.push(100),n.marker.color.push(p),n.x.push(h),n.y.push(300)}return n}(this.state.currentTime,this.state.axis,this.props.animationParams)]}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{style:{width:"100%"},data:this.getScatterData(),layout:this.plot.layout,config:this.plot.config,onInitialized:function(t){e.plot.layout=t.layout,e.plot.config=t.config},onUpdate:function(t){e.plot.layout=t.layout,e.plot.config=t.config}})}}]),t}(n.PureComponent);var E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={params:{m1:1*y,m2:2*y,a:1,C:1*b,currQ:157079632.67948964}},a.branches=null,a.handleNewParams=function(e){console.log(e),e.currQ=a.state.params.currQ,a.setState({params:e})},a.handleBranchClick=function(e){if(console.log("click",e),e.points.length){var t=Object.assign({},a.state.params);t.currQ=e.points[0].x,a.setState({params:t})}},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setStateInterval=window.setInterval(function(){},Math.floor(90))}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.setStateInterval)}},{key:"getScatterData",value:function(){return[this.branches.acoustic,this.branches.optical,this.branches.selected]}},{key:"render",value:function(){this.branches=function(e){for(var t={acoustic:{x:[],y:[],marker:{size:8,color:"blue"},name:"Acoustic",mode:"lines+markers"},optical:{x:[],y:[],marker:{size:8,color:"red"},name:"Optical",mode:"lines+markers"},selected:{x:[],y:[],marker:{size:10,color:["black"]},name:"Current",mode:"markers"}},a=Math.PI/e.a,n=.001/e.a,r=0;r<=a;r+=n){var o=v(!1,r,e),c=v(!0,r,e);t.acoustic.x.push(r*f),t.acoustic.y.push(o),t.optical.x.push(r*f),t.optical.y.push(c)}var l=v(!1,e.currQ/f,e),i=v(!0,e.currQ/f,e);return t.selected.x.push(e.currQ),t.selected.y.push(l),t.selected.x.push(e.currQ),t.selected.y.push(i),t}(this.state.params);var e=Object.assign({},this.state.params);return e.opticalWMax=Math.max.apply(null,this.branches.optical.y),e.acousticWMax=Math.max.apply(null,this.branches.acoustic.y),r.a.createElement("div",null,r.a.createElement(d.i,{color:"dark",dark:!0},r.a.createElement(d.j,{href:"#"},"Phonons"),r.a.createElement(d.h,{href:"#"},"Github")),r.a.createElement(d.g,{fluid:!0},r.a.createElement(d.c,{fluid:!0,className:"h-25"},r.a.createElement(d.k,null,r.a.createElement(d.b,{xs:"8"},r.a.createElement(p.a,{style:{width:"100%"},data:this.getScatterData(),onClick:this.handleBranchClick,layout:{title:"Dispersion of phonons",hovermode:"closest"}})),r.a.createElement(d.b,{xs:{size:4,offset:0}},r.a.createElement(k,{newParamsHandler:this.handleNewParams,maxQ:this.branches.acoustic.x[this.branches.acoustic.x.length-1]}))),r.a.createElement("br",null),r.a.createElement(d.k,null,r.a.createElement(d.b,{xs:"12"},r.a.createElement(w,{animationParams:e}))))),r.a.createElement("footer",{className:"footer font-small blue"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2018 Copyright:",r.a.createElement("a",{href:"https://kolsha.ru"}," Kolsha"))))}}]),t}(n.Component),x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(29);c.a.render(r.a.createElement(E,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/phonons-dispersion",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/phonons-dispersion","/service-worker.js");x?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):M(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):M(t,e)})}}()}},[[19,2,1]]]);
//# sourceMappingURL=main.70259545.chunk.js.map